<!doctype html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>GEM 3D Album</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0b0f1a;
      overflow: hidden;
      perspective: 1000px; /* 3D 透视距离 */
    }

    /* 背景模糊 */
    .bg {
      position: fixed; inset: 0; z-index: -1;
      background: url('gem-h5/assets/1.jpg') center/cover;
      filter: blur(25px) brightness(0.4);
      transform: scale(1.2);
    }

    /* 3D 容器 */
    #drag-container, #spin-container {
      position: relative;
      display: flex;
      margin: auto;
      transform-style: preserve-3d;
      transform: rotateX(-10deg);
    }

    #spin-container img {
      transform-style: preserve-3d;
      position: absolute;
      left: 0; top: 0;
      width: 100%; height: 100%;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
      border-radius: 10px;
      -webkit-box-reflect: below 10px linear-gradient(transparent, rgba(0,0,0,0.3)); /* 倒影 */
      cursor: pointer;
    }

    /* 自动旋转动画 */
    @keyframes spin {
      from { transform: rotateY(0deg); }
      to { transform: rotateY(360deg); }
    }

    .title {
      position: absolute;
      top: 10%;
      text-align: center;
      color: #fff;
      font-family: sans-serif;
    }
  </style>
</head>
<body>
  <div class="bg"></div>
  <div class="title">
    <h1>GEM 3D 旋转相册</h1>
    <p>鼠标拖拽或手指滑动旋转</p>
  </div>

  <div id="drag-container">
    <div id="spin-container">
      </div>
  </div>

  <script>
    // 你的图片路径
    const images = [
      "gem-h5/assets/1.jpg",
      "gem-h5/assets/2.jpg",
      "gem-h5/assets/3.jpg",
      "gem-h5/assets/4.jpg",
      "gem-h5/assets/5.jpg",
      "gem-h5/assets/6.jpg"
    ];

    const oSpin = document.getElementById('spin-container');
    const imgWidth = 190;  // 图片宽度
    const imgHeight = 260; // 图片高度

    // 动态创建图片
    images.forEach((src, i) => {
      const img = document.createElement('img');
      img.src = src;
      img.style.width = imgWidth + "px";
      img.style.height = imgHeight + "px";
      // 核心：计算每张图片的旋转角度和 Z 轴位移
      img.style.transform = `rotateY(${i * (360 / images.length)}deg) translateZ(300px)`;
      img.style.transition = "transform 1s";
      img.style.transitionDelay = `${(images.length - i) * 0.1}s`;
      oSpin.appendChild(img);
    });

    // 拖拽旋转逻辑
    let desX = 0, desY = 0, tX = 0, tY = 10;
    
    document.onpointerdown = function (e) {
      clearInterval(oSpin.timer);
      let sX = e.clientX, sY = e.clientY;

      this.onpointermove = function (e) {
        let nX = e.clientX, nY = e.clientY;
        desX = nX - sX;
        desY = nY - sY;
        tX += desX * 0.1;
        tY -= desY * 0.1;
        applyTransform(oSpin);
        sX = nX; sY = nY;
      };

      this.onpointerup = function (e) {
        this.onpointermove = null;
      };
      return false;
    };

    function applyTransform(obj) {
      if (tY > 180) tY = 180;
      if (tY < 0) tY = 0;
      obj.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
    }

    // 初始自动缓慢旋转
    let autoRotate = true;
    if (autoRotate) {
      setInterval(() => {
        tX += 0.2;
        applyTransform(oSpin);
      }, 17);
    }
  </script>
</body>
</html>
